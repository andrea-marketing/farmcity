<div class="container">
  <div class="row justify-content-center">

    <div class="col-12 col-lg-6">

      <!-- New search bar judith -->
      <%= form_tag markets_path, method: :get do %>
        <%= text_field_tag :query,
          params[:query],
          class: "form-control",
          id: "searchbar-index",
          placeholder: "Find a market"
        %>
        <%= submit_tag "Search", :name => nil, class: "d-none" %>
      <% end %>

    <h2>Markets</h2>
      <div data-controller="mapbox"
            data-mapbox-markers-value="<%= @markers.to_json %>"
            data-mapbox-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
            <div class="sticky">
              <button id="bouton-map" data-action="click->mapbox#display"><i class="fa-solid fa-map-location-dot white-icon"></i> Map</button>
            </div>
          <div style="width: 100%; height: 100vh; position: absolute; top: -100vh"
            data-mapbox-target= "map">
        </div>
      </div>
      <!-- list of markets -->

      <div class="cards">
          <%= render "markets", markets: @markets %>
      </div>

      <!-- Add new market profile -->


    </div>

  </div>
  </div>
</div>
